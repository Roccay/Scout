const Post = require("../models/post");
var uuidv4 = require("uuid4");
async function index(req, res) {
  try {
    const posts = await Post.find();
    console.log(posts);
    res.status(200).json({ success: true, response: posts });
  } catch (err) {
    console.log(err);
    res.status(500).json({ success: false, response: err });
  }
}

async function create(req, res) {
  try {
    const post = await Post.create({
      //   Author: getCurrentUser,
      //id has been generated by UUID automatically
      Author: "admin",
      id: uuidv4(),
      LocationName: req.body.LocationName,
      Address: req.body.address,
      Tags: req.body.tags,
      Fee: req.body.fee,
      Description: req.body.description,
      //leave blank for img
    });
    console.log(post);
    res.status(200).json({ success: true, response: post });
  } catch (err) {
    console.log(err);
    res.status(500).json({ success: false, response: err });
  }
}

module.exports = {
  index,
  create,
};
